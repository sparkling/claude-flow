<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Patch Success Mode</title>
  <meta name="description" content="Patch and repair toolkit for @claude-flow/cli init/runtime defects.">
  <link rel="stylesheet" href="../../assets/brutalist.css">
</head>
<body>
  <main class="site">
    <section class="banner">
      <div class="banner-inner">
        <div>
          <span class="kicker">Runtime + Init Patches / Success Online</span>
          <h1 class="brand">claude-flow-patch</h1>
          <p class="lead">Idempotent patch pipeline for `@claude-flow/cli`, `ruvector`, and `ruv-swarm`. Patch first. Verify always. Repair projects initialized before patching.</p>
          <a class="btn" href="https://www.npmjs.com/package/claude-flow-patch">Install From NPM</a>
          <a class="btn secondary" href="https://github.com/sparkling/claude-flow-patch">Source</a>
        </div>
        <img class="banner-art" src="../../assets/patch-matrix.svg" alt="Patch category matrix graphic">
      </div>
    </section>

    <div class="marquee"><span>patch :: verify :: repair :: namespace integrity :: hook fidelity :: daemon stability ::</span></div>

    <section class="grid">
      <article class="card full">
        <h2>Patch Snapshot</h2>
        <div class="stat-grid">
          <div class="stat"><span class="label">Package</span><span class="value">0.1.4</span></div>
          <div class="stat"><span class="label">Defect Catalog</span><span class="value">28 tracked</span></div>
          <div class="stat"><span class="label">Primary Flow</span><span class="value">patch - check - init</span></div>
          <div class="stat"><span class="label">Repair Path</span><span class="value">post-init helper sync</span></div>
        </div>
      </article>

      <article class="card full">
        <h2>Coverage Matrix</h2>
        <div class="graphic-frame">
          <img class="graphic" src="../../assets/patch-matrix.svg" alt="Patch coverage matrix">
        </div>
        <p class="tiny">Bars represent category intensity across worker, daemon, hooks, namespace, and init defects.</p>
      </article>

      <article class="card half">
        <h2>Patch Flow</h2>
        <pre><code>npx --yes claude-flow-patch patch --scope both
npx --yes claude-flow-patch check
npx @claude-flow/cli@latest init</code></pre>
      </article>

      <article class="card half">
        <h2>Repair Existing Projects</h2>
        <pre><code>npx --yes claude-flow-patch repair --target /path/to/project</code></pre>
        <p>Use this if the project was initialized before patches were applied.</p>
      </article>

      <article class="card third">
        <h3>Global Scope</h3>
        <p>Patches `~/.npm/_npx/*` cache paths used by transient `npx` executions.</p>
      </article>

      <article class="card third">
        <h3>Local Scope</h3>
        <p>Patches `./node_modules` paths where projects pin local CLI dependencies.</p>
      </article>

      <article class="card third">
        <h3>Both Scope</h3>
        <p>Recommended default so runtime behavior is stable regardless of invocation path.</p>
      </article>

      <article class="card full">
        <h2>Operator Runbook</h2>
        <ol class="steps">
          <li>Run patch with `--scope both` on any machine before init/upgrade.</li>
          <li>Run check to ensure sentinels are present and no cache drift occurred.</li>
          <li>Initialize or upgrade target projects after successful checks.</li>
          <li>If project was initialized earlier, run repair to rehydrate helpers.</li>
          <li>Re-run check after npm cache churn or CLI version updates.</li>
        </ol>
      </article>

      <article class="card full">
        <h2>Command Surface</h2>
        <table class="table">
          <thead>
            <tr><th>Command</th><th>Purpose</th></tr>
          </thead>
          <tbody>
            <tr><td><code>claude-flow-patch patch [--scope global|local|both]</code></td><td>Apply all registered fixes to selected install paths.</td></tr>
            <tr><td><code>claude-flow-patch check</code></td><td>Verify patch sentinel strings and detect drift.</td></tr>
            <tr><td><code>claude-flow-patch repair --target &lt;dir&gt;</code></td><td>Rehydrate stale `.claude/helpers` outputs after init-generator fixes.</td></tr>
          </tbody>
        </table>
      </article>

      <article class="card third">
        <h3>Defect Set</h3>
        <p>28 tracked defects across worker execution, memory namespaces, hooks, init generators, embeddings, and daemon scheduling.</p>
      </article>

      <article class="card third">
        <h3>Guarantees</h3>
        <ul>
          <li>Idempotent patch operations</li>
          <li>Scope-aware targeting (global/local)</li>
          <li>Sentinel verification pass</li>
        </ul>
      </article>

      <article class="card third">
        <h3>Compatibility</h3>
        <ul>
          <li>Bash + Python 3.6+</li>
          <li>Linux and macOS</li>
          <li>Validated with v3 alpha stream</li>
        </ul>
      </article>
    </section>

    <footer class="footer">
      <a href="../../">Back to index</a>
    </footer>
  </main>
</body>
</html>
